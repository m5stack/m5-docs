# GPS - åŒ—æ–—å¯¼èˆª {docsify-ignore-all}

<img src="assets/img/product_pics/unit/unit_gps_01.png" width="30%" height="30%"><img src="assets/img/product_pics/unit/unit_gps_02.png" width="30%" height="30%"><img src="assets/img/product_pics/unit/unit_gps_grove_c.png" width="30%" height="30%">

***

:memo:**[æè¿°](#æè¿°)**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:octocat:**[ä¾‹ç¨‹](#ä¾‹ç¨‹)**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:electric_plug:**[åŸç†å›¾](#åŸç†å›¾)**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ğŸ›’**[è´­ä¹°é“¾æ¥](https://item.taobao.com/item.htm?spm=a1z10.3-c.w4002-1172588106.13.51a6425e6lnUwE&id=583664452054)**

## æè¿°

**<mark>GPS</mark>**æ˜¯ä¸€æ¬¾é›†æˆä¸­ç§‘å¾®åŒ—æ–—å¯¼èˆªèŠ¯ç‰‡ AT6558 å’Œä¿¡å·æ”¾å¤§èŠ¯ç‰‡ MAX2659 çš„ Unitã€‚AT6558 æ˜¯è½¦è½½è®¾å¤‡çº§åˆ«çš„èŠ¯ç‰‡ï¼Œæ€§èƒ½å¼ºæ‚ï¼Œæ”¯æŒå¤šç§å«æ˜Ÿå¯¼èˆªç³»ç»Ÿï¼ŒåŒæ—¶æ¥æ”¶å…­ä¸ªå«æ˜Ÿå¯¼èˆªç³»ç»Ÿçš„ GNSS ä¿¡å·ï¼Œå¹¶ä¸”å®ç°è”åˆå®šä½ã€å¯¼èˆªå’Œæˆæ—¶ï¼Œè·å¾—å‡†ç¡®çš„å…¨çƒä½ç½®ä¿¡æ¯ã€‚

è¯¥ Unit æ¥ M5Core çš„ GROVE C(UART) å£ä¹‹åï¼ŒM5Core é€šè¿‡ä¸²å£ä¸å®ƒé€šè®¯ã€‚

## ç‰¹æ€§

- åŠŸèƒ½è§„èŒƒ
  - å®šä½ç²¾åº¦ï¼š2.5ç±³ï¼ˆCEP50ï¼Œå¼€é˜”åœ°ï¼‰
  - æ”¯æŒBDS/GPS/GLONASSå«æ˜Ÿå¯¼èˆªç³»ç»Ÿçš„å•ç³»ç»Ÿå®šä½ï¼Œæˆ–è€…ä»»æ„ç»„åˆçš„å¤šç³»ç»Ÿè”åˆå®šä½
  - æœ€å¤§å®šä½æ›´æ–°é¢‘ç‡ï¼š10Hz
  - æ”¯æŒD-GNSSå·®åˆ†å®šä½
- ä½åŠŸè€—
  - BDS/GPSåŒæ¨¡è¿ç»­è¿è¡Œï¼š<23mAï¼ˆ@3.3Vï¼‰
  - å¾…æœºï¼š<10uAï¼ˆ@3.3Vï¼‰
- å·¥ä½œæ¸©åº¦ï¼š-40~85â„ƒ
<!-- -  GROVEæ¥å£ï¼Œæ”¯æŒ[UIFlow](http://flow.m5stack.com)ç¼–ç¨‹ï¼Œ[Arduino](http://www.arduino.cc)ç¼–ç¨‹ -->
- Unitå†…ç½®ä¸¤ä¸ªLegoæ’ä»¶å­”ï¼Œæ–¹ä¾¿ä¸Legoä»¶ç»“åˆ

## åº”ç”¨

- è½¦è½½ã€èˆ¹è½½å®šä½ä¸å¯¼èˆª
- é«˜ç²¾åº¦æˆæ—¶
- æ™ºèƒ½æ‰§æ³•å®šä½

## ç›¸å…³é“¾æ¥

- **[å®˜æ–¹é¢‘é“è§†é¢‘](https://i.youku.com/i/UNjE1ODA2MzE0OA==?spm=a2hzp.8253869.0.0)**

- **[å®˜æ–¹è®ºå›](http://forum.m5stack.com/)**

- **æ•°æ®æ‰‹å†Œ** - [AT6558](http://www.icofchina.com/d/file/xiazai/2016-12-05/b1be6f481cdf9d773b963ab30a2d11d8.pdf) - [MAX2659](https://datasheets.maximintegrated.com/en/ds/MAX2659.pdf)

- **[TinyGPS++åº“å®˜ç½‘](http://arduiniana.org/libraries/tinygpsplus/)**

- **[AT6558çš„ä¿¡æ¯](http://www.icofchina.com/pro/dingwei/2016-07-29/5.html)**

- **[CASICå¤šæ¨¡å«æ˜Ÿå¯¼èˆªæ¥æ”¶æœºåè®®è§„èŒƒ](http://www.icofchina.com/d/file/xiazai/2017-05-02/ea0cdd3d81eeebcc657b5dbca80925ee.pdf)**

- **[ä¸Šä½æœºè½¯ä»¶GnssToolKit3(Windowsç‰ˆæœ¬)](http://www.icofchina.com/d/file/xiazai/2018-05-23/2b29a8da746eec0ef1dcd9deae895298.zip)**

## ä¾‹ç¨‹

### Arduino IDE

*å…·ä½“ä¾‹ç¨‹`GPSRaw.ino`è¯·ç‚¹å‡»[è¿™é‡Œ](https://github.com/m5stack/M5-ProductExampleCodes/tree/master/Unit/GPS/Arduino)ã€‚*

```arduino
#include <M5Stack.h>

/* By default, GPS is connected with M5Core through UART2 */
HardwareSerial GPSRaw(2);

void setup() {
  M5.begin();
  GPSRaw.begin(9600);// GPS init
  Serial.println("hello");
  termInit();
}

void loop() {
  // put your main code here, to run repeatedly:
  if(Serial.available()) {
    int ch = Serial.read();
    GPSRaw.write(ch);
  }
  if(GPSRaw.available()) {
    int ch = GPSRaw.read();// read GPS information
    Serial.write(ch);
    termPutchar(ch);
  }
}
```

çƒ§å½•ä¾‹ç¨‹`GPSRaw.ino`ä¹‹åï¼Œå±å¹•å’Œä¸²å£æ˜¾ç¤ºç»ˆç«¯ä¼šæ‰“å°å¦‚ä¸‹ç±»ä¼¼çš„ä¿¡æ¯

```
$GPGSA,A,1,,,,,,,,,,,,,25.5,25.5,25.5*02
$BDGSA,A,1,,,,,,,,,,,,,25.5,25.5,25.5*13
$GPGSV,1,1,00*79
$BDGSV,1,1,00*68
$GNRMC,,V,,,,,,,,,,M*4E
$GNVTG,,,,,,,,,M*2D
$GNZDA,,,,,,*56
$GPTXT,01,01,01,ANTENNA OPEN*25
```

## åŸç†å›¾

<img src="assets/img/product_pics/unit/gps_sch.png">

### ç®¡è„šæ˜ å°„

<table>
 <tr><td>M5Core(GROVEæ¥å£C)</td><td>ESP32ä¸²å£2æ¥æ”¶å¼•è„šU2RXD(GPIO16)</td><td>ESP32ä¸²å£2å‘é€å¼•è„šU2TXD(GPIO17)</td><td>5V</td><td>GND</td></tr>
 <tr><td>åŒ—æ–—å¯¼èˆªUnit</td><td>ä¿¡å·å‘é€å¼•è„šTXD</td><td>ä¿¡å·æ¥æ”¶å¼•è„šRXD</td><td>5V</td><td>GND</td></tr>
</table>
