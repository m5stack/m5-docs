# RFID {docsify-ignore-all}

<img src="assets/img/product_pics/unit/unit_rfid_01.png" width="30%" height="30%"><img src="assets/img/product_pics/unit/unit_rfid_02.png" width="30%" height="30%"><img src="assets/img/product_pics/unit/unit_rfid_grove_a.png" width="30%" height="30%">

***

:memo:**[æ¦‚è¦](#æ¦‚è¦)**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:octocat:**[ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰](#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰)**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:electric_plug:**[å›è·¯å›³](#å›è·¯å›³)** &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ğŸ›’**[è³¼å…¥ãƒªãƒ³ã‚¯](https://www.aliexpress.com/store/product/M5Stack-Newest-Mini-RFID-Unit-RC522-Module-Sensor-for-Arduino-SPI-Writer-Reader-IC-Card-with/3226069_32963407976.html)**

## æ¦‚è¦

**<mark>RFID</mark>** ã¯ **MFRC522**(13.56MHzã®éæ¥è§¦é€šä¿¡ç”¨ãƒªãƒ¼ãƒ€ãƒ©ã‚¤ã‚¿IC)ã‚’å†…è”µã—ãŸãƒ¦ãƒ‹ãƒƒãƒˆã§ã™ã€‚ã“ã®ãƒ¦ãƒ‹ãƒƒãƒˆã¯ã€éæ¥è§¦ã‚«ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€æ©Ÿèƒ½ã‚’å‚™ãˆã€è¤‡æ•°ã®ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’è­˜åˆ¥ã—ã¦è¨˜éŒ²ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å…¥é€€å®¤ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€ãƒ‘ãƒ³ãƒãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã€å€‰åº«å•†å“ç®¡ç†ãŠã‚ˆã³è»Šä¸¡ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†ãªã©ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

M5Coreã®GROVE Aã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«æ¥ç¶šã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚I2Cã‚¢ãƒ‰ãƒ¬ã‚¹ã¯**0x28**ã§ã™ã€‚

## ç‰¹å¾´

- I2Cãƒ‡ãƒ¼ã‚¿ãƒ¬ãƒ¼ãƒˆ: Fast mode: æœ€å¤§400kbps; High-speed mode: æœ€å¤§3400kbps
- RC522ãƒˆãƒ©ãƒ³ã‚·ãƒ¼ãƒãƒãƒƒãƒ•ã‚¡ï¼š64ãƒã‚¤ãƒˆ
- ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«: ISO14443A, MIFARE, NTAG
- å‹•ä½œæ¸©åº¦: -20â„ƒ~85â„ƒ
- ãƒ‡ãƒ¼ã‚¿ä¿å­˜æœŸé–“: > 10å¹´
- èª­ã¿æ›¸ãè·é›¢: < 8 cm
- GROVE ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹, [UiFlow](http://flow.m5stack.com), [Arduino](http://www.arduino.cc)ã‚’ã‚µãƒãƒ¼ãƒˆ
- LEGO äº’æ›ãƒ›ãƒ¼ãƒ«

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å†…å®¹

- 1x RFID ãƒ¦ãƒ‹ãƒƒãƒˆ
- 1x Grove ã‚±ãƒ¼ãƒ–ãƒ«

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

- ã‚¹ãƒãƒ¼ãƒˆãƒ›ãƒ¼ãƒ ã‚¢ã‚¯ã‚»ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
- è»Šä¸¡ç®¡ç†
- ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆäº¤é€š
- ã‚¹ãƒãƒ¼ãƒˆæœ¬æ£š

## é–¢é€£ãƒªãƒ³ã‚¯

- **[å…¬å¼ãƒ“ãƒ‡ã‚ª](https://www.youtube.com/channel/UCozgFVglWYQXbvTmGyS739w)**

- **[ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ](http://forum.m5stack.com/)**

- **ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆ**
  - [MFRC522](https://www.nxp.com/docs/en/data-sheet/MFRC522.pdf)

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

### 1. Arduino

*å®Œå…¨ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯[ã“ã¡ã‚‰](https://github.com/m5stack/M5-ProductExampleCodes/tree/master/Unit/RFID/Arduino)ã€‚*

RFID.inoã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ ICã‚„ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã®NFCã‚’ãƒ¦ãƒ‹ãƒƒãƒˆã®å‘¨ã‚Šã§4å›ã»ã©å¾€å¾©ã•ã›ã‚‹ã¨ã€M5Coreã®ç”»é¢ã«ã‚«ãƒ¼ãƒ‰ã‚„ã‚¹ãƒãƒ›ã®NFCã®UIDãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```clike
/*
    RFID.ino
*/
#include <Wire.h>
#include "MFRC522_I2C.h"
#include <M5Stack.h>

// 0x28 is i2c address on SDA. Check your address with i2cscanner if not match.
MFRC522 mfrc522(0x28);   // MFRC522 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å®£è¨€

// åˆæœŸåŒ–
M5.begin();
Wire.begin();
/* MFRC522ã‚’åˆæœŸåŒ– */
mfrc522.PCD_Init();
/* Show details of PCD - MFRC522 Card Reader details */
ShowReaderDetails();

// åˆ©ç”¨å¯èƒ½ãªã‚«ãƒ¼ãƒ‰ã®UIDã‚’å–å¾—
mfrc522.PICC_IsNewCardPresent();// scan for a new card
mfrc522.PICC_ReadCardSerial();// read data
// a new card is selected. The UID and SAK is saved at mfrc522.uid structor.
for (byte i = 0; i < mfrc522.uid.size; i++) {
  Serial.print(mfrc522.uid.uidByte[i] < 0x10 ? " 0" : " ");
  Serial.print(mfrc522.uid.uidByte[i], HEX);
}

// ãã®ä»–ã®é–¢æ•°
void ShowReaderDetails() {
  /* MFRC522ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾— */
  byte v = mfrc522.PCD_ReadRegister(mfrc522.VersionReg);
  if (v == 0x91) Serial.print(F(" = v1.0"));
  else if (v == 0x92) Serial.print(F(" = v2.0"));
  else Serial.print(F(" (unknown)"));
}
```

<img src="assets/img/product_pics/unit/unit_example/RFID/example_unit_rfid_01.png" width="100%" height="100%">

### 2. UIFlow

*å®Œå…¨ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯[ã“ã¡ã‚‰](https://github.com/m5stack/M5-ProductExampleCodes/tree/master/Unit/RFID/UIFlow)ã€‚*

[UIFlow](flow.m5stack.com) ã‚’åˆ©ç”¨ã—ã¦ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãè¾¼ã‚“ã ã‚‰ã€ã‚«ãƒ¼ãƒ‰ã‚’RFIDãƒ¦ãƒ‹ãƒƒãƒˆã«è¿‘ã¥ã‘ã‚‹ã¨ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã«ã€ŒTrueã€ã®æ–‡å­—ã€ãã—ã¦ã‚«ãƒ¼ãƒ‰ã®UIDãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

<img src="assets/img/product_pics/unit/unit_example/RFID/example_unit_rfid_02.png">

## å›è·¯å›³

<img src="assets/img/product_pics/unit/rfid_sch.JPG">

### ãƒ”ãƒ³ãƒãƒƒãƒ—

<table>
<tr><td>M5Core(GROVE A)</td><td>GPIO22</td><td>GPIO21</td><td>5V</td><td>GND</td></tr>
 <tr><td>RFID Unit</td><td>SCL</td><td>SDA</td><td>5V</td><td>GND</td></tr>
</table>
